{{ if ne .IsHome true }}
  {{ $infiniteScroll := resources.Get "js/infinite-scroll.js" }}
  {{ $lazyScript := resources.Get "js/lazy-loading.js" }}
  {{ $swiper := resources.Get "js/swiper.js" }}
  {{ $js := slice $infiniteScroll $lazyScript $swiper | resources.Concat "js/ils-bundle.js" | minify | fingerprint }}
  <script src="{{ $js.Permalink }}"></script>
  <script>
    var myLazyLoad = new LazyLoad({
      elements_selector: ".lazy",
      threshold: 200,
      class_loading: "loading",
      class_error: "error"
    });
    var mutationObserver = new MutationObserver(function (mutations) {
      mutations.forEach(function (mutation) {
        myLazyLoad.update();
      });
    });
    var b = document.getElementsByClassName("list")[0];
    var config = { childList: true, subtree: true };
    mutationObserver.observe(b, config);
  </script>
  <script>
    var mySwiper = new Swiper ('.swiper-container', {
      slidesPerView: 1,
      loop: true,
      lazy: true,
      centeredSlides: true,
      autoplay: {
        delay: 2500,
        disableOnInteraction: false
      },
      pagination: {
        el: '.swiper-pagination',
        dynamicBullets: true,
        clickable: true
      },
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev'
      }
    });
  </script>
  <script>
    function updateNextURL(doc) {
      nextURL = doc.querySelector('.articleNext').href;
    }

    updateNextURL(document);

    var infScroll = new InfiniteScroll('.single-list', {
      path: function () {
        return nextURL
      },
      append: '.post',
      hideNav: '.pagination',
      history: 'replace',
    });

    infScroll.on('load.infiniteScroll', function (event, response) {
      updateNextURL(response);
    });
  </script>
{{ else }}
  {{ $infiniteScroll := resources.Get "js/infinite-scroll.js" }}
  {{ $lazyScript := resources.Get "js/lazy-loading.js" }}
  {{ $js := slice $lazyScript $infiniteScroll | resources.Concat "js/il-bundle.js" | minify | fingerprint }}
  <script src="{{ $js.Permalink }}"></script>
  <script>
    var myLazyLoad = new LazyLoad({
    elements_selector: ".lazy",
    threshold: 200,
    class_loading: "loading",
    class_error: "error"
  });
  var mutationObserver = new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
      myLazyLoad.update();
    });
  });
    var b      = document.getElementsByClassName("list")[0];
    var config = { childList: true, subtree: true };
    mutationObserver.observe(b, config);
  </script>
{{ end }}